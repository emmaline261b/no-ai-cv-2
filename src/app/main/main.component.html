<div class="main-wrapper mat-elevation-z2">
    <mat-card appearance="outlined" class="d-flex flex-column file-upload">
        <mat-card-title class="p-2">Dodaj plik, aby wykonać analizę anty-AI:</mat-card-title>
        <mat-card-content class="justify-content-around">
            
            <input
                    #fileUpload
                    (change)="onFileSelected($event)"
                    [accept]="requiredFileType"
                    hidden
                    type="file"
            />
            
            <div class="d-flex align-items-center justify-content-between my-3">
                <span>{{ fileName || 'Nie wybrano pliku.' }}</span>
                
                <button
                        (click)="fileUpload.click()"
                        color="primary"
                        mat-mini-fab
                        matTooltip="Wybierz plik PDF"
                >
                    <mat-icon>attach_file</mat-icon>
                </button>
            </div>
            <div class="d-flex flex-row justify-content-between">
                <mat-progress-bar
                        *ngIf="uploadProgress"
                        [value]="uploadProgress"
                        class="my-progress-bar"
                        mode="determinate"
                ></mat-progress-bar>
                
                <button
                        (click)="cancelUpload()"
                        *ngIf="uploadProgress"
                        color="warn"
                        mat-mini-fab
                        matTooltip="Anuluj"
                >
                    <mat-icon>delete_forever</mat-icon>
                </button>
            </div>
            <div class="text-center mt-3">
                <button class="rounded-fab" mat-fab extended color="primary" (click)="analyzeFile()" [disabled]="!fileName">
                    <mat-icon class="me-2">search</mat-icon>
                    Wykonaj analizę
                </button>
            </div>
        </mat-card-content>
    </mat-card>
</div>